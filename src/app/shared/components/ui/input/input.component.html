<div class="form-control relative">
  <div [ngClass]="label? 'mb-2':''" class="flex flex-row items-center justify-between">
    <div class="flex flex-row items-center">
      <label
        *ngIf="label"
        [for]="inputId"
        class="flex items-center text-sm text-center text-[#333333] font-medium"
        >{{ label }}
        <span class="ml-2 text-xs font-light" *ngIf="description"
          >( Desc. : {{ description }} )</span
        >
        <span *ngIf="isRequired" class="text-[#ED451B] ml-[2px]">*</span>
      </label>
    </div>
    <!-- <div class="h-4" *ngIf="focus || control.pristine"></div>
    <div *ngIf="validatorIcon" class="flex flex-row gap-[2px]">
      <div *ngIf="tooltip" class="hovertext flex items-center" [attr.data-hover]="tooltip">
        <hero-icon
          name="exclamation-circle"
          class="h-4 w-4 cursor-pointer flex text-right fill-tms-blue-500 text-white"
        ></hero-icon>
      </div>
      <hero-icon
        *ngIf="control.invalid && control.dirty && control.touched"
        name="x-circle"
        class="h-4 w-4 fill-tms-error-600 text-white"
      ></hero-icon>
      <hero-icon
        *ngIf="control.valid"
        name="check-circle"
        class="h-4 w-4 fill-tms-green-500 text-white"
      ></hero-icon>
    </div> -->
  </div>
  <div *ngIf="isPassword" class="absolute flex right-3 mt-[2px] top-1/2 text-tms-neutral-500 focus:ring-blue-500 focus:border-blue-500 h-4 w-4 cursor-pointer duration-200">
    <mat-icon 
      (click)="togglePasswordVisibility()"
      [ngClass]="inputTypePassword === 'text'? '  text-etma-danger-500':' text-etma-neutral-500'"
      class="text-slate-400" 
      [svgIcon]="inputTypePassword === 'text'? 'ph-regular:eye-slash':'ph-regular:eye'">
    </mat-icon>
    <!-- <hero-icon
          (click)="togglePasswordVisibility()"
          [name]="inputTypePassword === 'text'? 'eye-off':'eye'"
          [ngClass]="inputTypePassword === 'text'? '  text-tms-error-500':' text-tms-neutral-500'"
          class="h-4 w-4 cursor-pointer duration-200 ">
    </hero-icon> -->
  </div>
  <div *ngIf="isSearch" [ngClass]="label? 'top-[12px]':'top-[4px]'" class="absolute flex left-2 text-black focus:ring-blue-500 focus:border-blue-500 h-5 w-5 duration-200 z-[20]">
    <mat-icon
      class="text-slate-400" 
      svgIcon="ph-duotone:magnifying-glass">
    </mat-icon>
    <!-- <hero-icon
          (click)="togglePasswordVisibility()"
          [name]="inputTypePassword === 'text'? 'eye-off':'eye'"
          [ngClass]="inputTypePassword === 'text'? '  text-tms-error-500':' text-tms-neutral-500'"
          class="h-4 w-4 cursor-pointer duration-200 ">
    </hero-icon> -->
  </div>
  <input
    *ngIf="isUppercase"
    oninput="this.value = this.value.toUpperCase()"
    [formControl]="control"
    [type]="isPassword? inputTypePassword : inputType"
    [id]="inputId"
    [class.invalid]="control.invalid && control.dirty && control.touched"
    class="bg-white h-8 text-sm disabled:bg-etma-neutral-300 font-normal text-etma-neutral-800 placeholder:text-text-text-caption focus:border-etma-blue-600 focus:ring-1 focus:ring-etma-blue-200 block w-full border-[1px] border-[#E4E4E7] px-3 py-[6px] rounded-md duration-150"
    [ngClass]="{
      'pl-8' : isSearch,
      'border-[1px]' : border,
      'border-transparent' : !border,
      'border-border-border-danger' : isError,
      'border-[#E4E4E7]' : !isError
    }"
    [placeholder]="placeholder"
    [style]="style"
    (focus)="onFocus()"
    (blur)="onBlur()"
    (keyup.enter)="onEnter()"
    [attr.border-data]="borderData"
  />
  <input
    *ngIf="!isUppercase"
    [formControl]="control"
    [type]="isPassword? inputTypePassword : inputType"
    [id]="inputId"
    [class.invalid]="control.invalid && control.dirty && control.touched"
    class="bg-white h-8 text-sm disabled:bg-etma-neutral-300 font-normal text-etma-neutral-800 placeholder:text-text-text-caption focus:border-etma-blue-600 focus:ring-1 focus:ring-etma-blue-200 block w-full border-[1px] border-[#E4E4E7] px-3 py-[6px] rounded-md duration-150"
    [ngClass]="{
      'pl-8' : isSearch,
      'border-[1px]' : border,
      'border-transparent' : !border,
      'border-border-border-danger' : isError,
      'border-[#E4E4E7]' : !isError
    }"
    [placeholder]="placeholder"
    [style]="style"
    (focus)="onFocus()"
    (blur)="onBlur()"
    (keyup.enter)="onEnter()"
    [attr.border-data]="borderData"
  />
</div>
<ng-container *ngIf="control.invalid && control.dirty && control.touched">
  <div
    *ngFor="let err of control.errors | keyvalue"
    class="text-xs font-jakarta text-text-text-danger mt-2"
  >
    {{ errorMessage[err.key] }}
  </div>
</ng-container>
